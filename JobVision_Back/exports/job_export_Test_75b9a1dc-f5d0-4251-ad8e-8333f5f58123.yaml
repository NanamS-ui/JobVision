- defaultTab: nodes
  description: Job appel� en r�f�rence depuis un autre job
  executionEnabled: true
  id: 75b9a1dc-f5d0-4251-ad8e-8333f5f58123
  loglevel: INFO
  name: Job R�f�renc� 2
  nodeFilterEditable: true
  nodefilters:
    dispatch:
      excludePrecedence: true
      keepgoing: false
      rankOrder: ascending
      successOnEmptyNodeFilter: false
      threadcount: '1'
    filter: 'name:node-remote-max,node-remote-toky'
  nodesSelectedByDefault: true
  plugins:
    ExecutionLifecycle: {}
  schedule:
    month: '*'
    time:
      hour: '*'
      minute: '*'
      seconds: '0'
    weekday:
      day: '*'
    year: '*'
  scheduleEnabled: false
  sequence:
    commands:
    - description: Step 1
      exec: echo bonjour
      keepgoingOnSuccess: true
    - script: |
        #!/bin/bash

        # Crée un fichier Java
        cat > HelloWorld.java <<'EOF'
        public class HelloWorld {
            public static void main(String[] args) {
                System.out.println("Hello from Rundeck!");
            }
        }
        EOF

        # Compile le fichier
        javac HelloWorld.java

        # Pause de 5 secondes
        sleep 5

        # Exécute le programme
        java HelloWorld
    - script: |
        #!/bin/bash

        set -e  # Arrêter le script à la première erreur

        # Fonction appelée en cas d'erreur
        error_handler() {
          echo "❌ Erreur détectée dans le script à la ligne $1."
          exit 1
        }

        trap 'error_handler $LINENO' ERR

        echo "Étape 1 : démarrage du script..."

        sleep 2

        echo "Étape 2 : ce message ne sera probablement pas affiché si l'erreur ci-dessus arrête le script"
    keepgoing: false
    strategy: node-first
  timeZone: Asia/Baghdad
  uuid: 75b9a1dc-f5d0-4251-ad8e-8333f5f58123
