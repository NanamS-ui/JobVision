- description: ''
  executionEnabled: true
  id: b766974c-2f5f-4b88-b200-a3813e24f1f2
  loglevel: INFO
  name: Say Hello With Option
  nodeFilterEditable: true
  nodefilters:
    dispatch:
      excludePrecedence: true
      keepgoing: true
      rankOrder: ascending
      successOnEmptyNodeFilter: false
      threadcount: '1'
    filter: 'name:node-remote-max,node-remote-toky,node-remote-jean'
  nodesSelectedByDefault: true
  options:
  - name: option
    required: true
    value: guest
  plugins:
    ExecutionLifecycle: null
  scheduleEnabled: true
  sequence:
    commands:
    - description: Say Hello
      script: |
        #!/bin/bash

        # V�rifier que l'option NAME est fournie
        if [ -z "${option.NAME}" ]; then
          echo "Erreur : aucun nom fourni !"
          echo "Usage : saisir l'option NAME"
          exit 1
        fi

        echo "D�but du job pour ${option.NAME}"

        # Pause 2 secondes
        sleep 2

        # G�n�rer le fichier texte
        OUTPUT_FILE="hello_${option.NAME}.txt"
        echo "Bonjour, ${option.NAME} ! Ceci est votre fichier g�n�r� par le workflow Rundeck." > "$OUTPUT_FILE"

        echo "Fichier cr�� : $OUTPUT_FILE"
        echo "Fin du job"
    keepgoing: true
    strategy: node-first
  uuid: b766974c-2f5f-4b88-b200-a3813e24f1f2
